import{r as j,o as O,j as e,C as K}from"./index-C94lwiJv.js";import{S as D}from"./sweetalert2.all-huutmort.js";import{D as q}from"./Districtdata-DjCRdM62.js";import{C as T,a as G,b as w}from"./CForm-By0H7RBh.js";import{C as H,a as b}from"./index-CynBYxOh.js";import{C as W}from"./CAlert-h_oXZGtT.js";import{C as c,a as r}from"./CRow-Bgj36awN.js";import{c as s,b as o,a as N}from"./CFormInput-ChrqK6Lh.js";import{C as g}from"./CFormCheck-CrqSB_FR.js";import{C as Y,a as R,b as L,c as J}from"./CAccordionHeader-CnLqJcGE.js";import{C as U,a as $,b as A,c as Z}from"./CTabList-Cz2zYZrj.js";import{n as _}from"./DefaultLayout-BFpOW43o.js";import"./CCloseButton-fePu8NsK.js";import"./CCollapse-M9gZTZY7.js";import"./getTransitionDurationFromElement-Cpu4p4hx.js";import"./index.esm-DV_CLorw.js";import"./cil-user-Ddrdy7PS.js";import"./logo1-_GWK0zuy.js";const Q=()=>{const[m,y]=j.useState(!1),[i,E]=j.useState({DOB:"",CardSerialNumber:"",CreatedBy:"Admin",District:"",FullName:"",Gender:"",HolyCommunionStatus:"",MaritalStatus:"",MobileNumber:"",NationalID:"",SpouseName:"",SpouseZPNumber:null,Disabled:!1,DisabilityType:"",UpdatedBy:"Admin",ZPNumber:null,EPCNumber:"",Status:1,Children:[{FullName:"",Baptized:!1,Communicant:!1,yearOfBirth:null,Disabled:!1,DisabilityType:"",GuardianZpNumber:"",Status:1}]}),[p,P]=j.useState(!1),[C,u]=j.useState([{FullName:"",Communicant:!1,yearOfBirth:null,Disabled:!1,DisabilityType:"",GuardianZpNumber:"",Baptized:!1}]),f=O(),d=a=>{const{name:t,value:l,type:M,checked:F}=a.target;E(B=>({...B,[t]:M==="checkbox"?F:l}))},n=(a,t)=>{const{name:l,value:M,type:F,checked:B}=t.target;u(z=>z.map((k,I)=>I===a?{...k,[l]:F==="checkbox"?B:M}:k))},x=()=>u([...C,{name:"",age:"",baptized:"No",confirmed:"No",disabled:"",disabilityType:""}]),h=a=>u(C.filter((t,l)=>l!==a)),S={...i,children:p?C:[]},v=async a=>{a.preventDefault(),y(!0);try{const t=await fetch("http://192.168.12.245:8594/api/registrations/insertMemberAndChild",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(S)});let l=await t.json();console.log(l),t.ok?(l.status=="00"&&(D.fire({icon:"success",title:l.statusDescription,text:"Member Added successfully"}).finally(()=>{f("/MemberInformation")}),y(!1)),y(!1)):D.fire({icon:"error",title:l.statusDescription,text:"Failed to Add Member"})}catch{alert("An error occurred."),y(!1)}};return console.log(S),e.jsxs(T,{children:[e.jsx(H,{children:e.jsx(W,{color:"primary",variant:"solid",style:{marginTop:"10px",display:"flex"},children:e.jsx("h3",{children:"Existing Member"})})}),e.jsx(G,{children:e.jsxs(w,{onSubmit:v,children:[e.jsxs(c,{children:[e.jsxs(r,{md:6,children:[e.jsx(s,{style:{fontWeight:"bold",color:"blue"},children:"*Full Name"}),e.jsx(o,{placeholder:"Enter Full Name",type:"text",name:"FullName",value:i.FullName,onChange:d,className:"mb-3",required:!0}),e.jsx(s,{style:{fontWeight:"bold",color:"blue"},children:"*Date of Birth"}),e.jsx(o,{type:"date",name:"DOB",value:i.DOB,onChange:d,className:"mb-3",required:!0})]}),e.jsxs(r,{md:6,children:[e.jsx(s,{style:{fontWeight:"bold",color:"blue"},children:"*Gender"}),e.jsxs(b,{name:"Gender",value:i.Gender,onChange:d,className:"mb-3",required:!0,children:[e.jsx("option",{children:"Select Gender"}),e.jsx("option",{value:"Male",children:"Male"}),e.jsx("option",{value:"Female",children:"Female"}),e.jsx("option",{value:"Other",children:"Other"})]}),e.jsx(s,{style:{fontWeight:"bold",color:"blue"},children:"*Holy Communion Status"}),e.jsxs(b,{name:"HolyCommunionStatus",value:i.HolyCommunionStatus,onChange:d,className:"mb-3",required:!0,children:[e.jsx("option",{children:"Select Holy Communion Status"}),e.jsx("option",{value:"Yes",children:"Yes"}),e.jsx("option",{value:"No",children:"No"})]})]})]}),e.jsxs(c,{children:[e.jsxs(r,{md:6,children:[e.jsx(s,{style:{fontWeight:"bold",color:"blue"},children:"*Marital Status"}),e.jsxs(b,{name:"MaritalStatus",value:i.MaritalStatus,onChange:d,className:"mb-3",required:!0,children:[e.jsx("option",{children:"Select Marital Status"}),e.jsx("option",{value:"Single",children:"Single"}),e.jsx("option",{value:"Married",children:"Married"}),e.jsx("option",{value:"Divorced",children:"Divorced"}),e.jsx("option",{value:"Widowed",children:"Widowed"})]}),e.jsx(s,{style:{fontWeight:"bold",color:"blue"},children:"*Mobile Number"}),e.jsx(o,{placeholder:"Enter Mobile Number i.e 07******",type:"number",name:"MobileNumber",value:i.MobileNumber,className:"mb-3",onChange:d,required:!0})]}),e.jsxs(r,{md:6,children:[e.jsx(s,{style:{fontWeight:"bold",color:"blue"},children:"*ZP Number"}),e.jsx(o,{type:"number",placeholder:"Enter ZPNumber e.g 0123",name:"ZPNumber",value:i.ZPNumber,className:"mb-3",onChange:d,required:!0}),e.jsx(s,{style:{fontWeight:"bold",color:"blue"},children:"*District"}),e.jsxs(b,{name:"District",placeholder:"Enter District",value:i.District,onChange:d,className:"mb-3",required:!0,children:[e.jsx("option",{children:"Select District"}),q.map(a=>e.jsx("option",{value:a.district,children:a.district},a.id))]})]}),e.jsx(r,{md:6,children:i.MaritalStatus!="Single"&&e.jsxs(e.Fragment,{children:[e.jsx(s,{style:{fontWeight:"bold",color:"blue"},children:"Spouse Name"}),e.jsx(o,{type:"text",name:"SpouseName",placeholder:"Enter Spouse Name",value:i.SpouseName,className:"mb-3",onChange:d})]})}),i.MaritalStatus!="Single"&&e.jsxs(r,{md:6,children:[e.jsx(s,{style:{fontWeight:"bold",color:"blue"},children:"Spouse ZP Number"}),e.jsx(o,{type:"number",placeholder:"Enter ZPNumber e.g 0123",name:"SpouseZPNumber",value:i.SpouseZPNumber,className:"mb-3",onChange:d})]})]}),e.jsx(c,{}),e.jsx(c,{}),e.jsx(c,{}),e.jsx(c,{children:e.jsxs(r,{md:6,style:{margin:"10px"},children:[e.jsx(g,{label:"Disabled",name:"Disabled",checked:i.Disabled,onChange:d,className:"mb-3"}),i.Disabled&&e.jsx(o,{label:"Disability Type",type:"text",name:"DisabilityType",value:i.DisabilityType,className:"mb-3",onChange:d})]})}),e.jsx(c,{children:e.jsx(r,{md:"6",children:e.jsx(g,{label:e.jsx("span",{style:{fontWeight:"bold",color:"green"},children:"Have a child?"}),checked:p,onChange:()=>P(!p),className:"mb-3"})})}),p&&C.map((a,t)=>e.jsx(Y,{activeItemKey:t,style:{border:"1px solid #6082B6",backgroundColor:"blue",margin:"10px"},children:e.jsxs(R,{itemKey:0,children:[e.jsx(L,{children:"Add Children"}),e.jsx(J,{children:e.jsxs(e.Fragment,{children:[e.jsx(s,{children:"Children"}),e.jsxs(c,{children:[e.jsxs(r,{md:4,children:[e.jsx(s,{children:"*Full Name"}),e.jsx(o,{name:"FullName",placeholder:"Enter Full Name",value:a.FullName,className:"mb-3",onChange:l=>n(t,l),required:!0})]}),e.jsxs(r,{md:4,children:[e.jsx(s,{children:"*Year of Birth"}),e.jsx(o,{name:"yearOfBirth",type:"number",placeholder:"Enter Year of Birth",className:"mb-3",value:a.yearOfBirth,onChange:l=>n(t,l),required:!0})]}),e.jsxs(r,{md:4,children:[e.jsx(s,{children:"*Guardian ZP Number"}),e.jsx(o,{name:"GuardianZpNumber",placeholder:"Enter ZPNumber e.g ZP123",className:"mb-3",value:a.GuardianZpNumber,onChange:l=>n(t,l),required:!0})]}),e.jsxs(r,{md:4,children:[e.jsx(g,{label:"Baptized",name:"Baptized",checked:a.Baptized,onChange:l=>n(t,l),className:"mb-3"}),e.jsx(g,{label:"Communicant",name:"Communicant",checked:a.Communicant,onChange:l=>n(t,l),className:"mb-3"}),e.jsx(g,{label:"Disabled",name:"Disabled",checked:a.Disabled,onChange:l=>n(t,l),className:"mb-3"}),a.Disabled&&e.jsx(o,{label:"Disability Type",type:"text",name:"DisabilityType",value:a.DisabilityType,onChange:l=>n(t,l),className:"mb-3"})]})]},t),e.jsx(c,{children:e.jsx(r,{md:4,children:e.jsx(N,{style:{color:"white"},color:"danger",onClick:()=>h(t),children:"Remove"})})})]})})]})})),p&&e.jsx("div",{className:"mb-3 mt-3",style:{display:"flex",flexDirection:"row",alignItems:"center"},children:e.jsx(N,{color:"primary",onClick:x,style:{marginRight:"5px"},children:"Add Another Child"})}),m?e.jsxs(N,{color:"primary",disabled:!0,style:{fontWeight:"bold"},children:[e.jsx(K,{as:"span",className:"me-2",size:"sm","aria-hidden":"true"}),e.jsx("span",{children:"submit..."})]}):e.jsx(N,{style:{fontWeight:"bold"},color:"primary",type:"submit",children:"Submit"})]})})]})},V=()=>{const[m,y]=j.useState({DOB:"",CardSerialNumber:"",CreatedBy:"Admin",District:"",FullName:"",Gender:"",HolyCommunionStatus:"",MaritalStatus:"",MobileNumber:"",NationalID:"",SpouseName:"",SpouseZPNumber:null,Disabled:!1,DisabilityType:"",UpdatedBy:"Admin",ZPNumber:null,EPCNumber:"",Status:22,Children:[{FullName:"",Baptized:!1,Communicant:!1,yearOfBirth:null,Disabled:!1,DisabilityType:"",GuardianZpNumber:"",Status:1}]}),[i,E]=j.useState(!1),[p,P]=j.useState([{FullName:"",Communicant:!1,yearOfBirth:null,Disabled:!1,DisabilityType:"",GuardianZpNumber:"",Baptized:!1}]),C=O(),u=n=>{const{name:x,value:h,type:S,checked:v}=n.target;y(a=>({...a,[x]:S==="checkbox"?v:h}))},f={...m,children:i?p:[]},d=async n=>{n.preventDefault();try{const x=await fetch("http://192.168.12.245:8594/api/registrations/insertMemberAndChild",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(f)});let h=await x.json();console.log(h),x.ok?h.status=="00"&&D.fire({icon:"success",title:h.statusDescription,text:"Member Added successfully"}).finally(()=>{C("/MemberInformation")}):D.fire({icon:"error",title:h.statusDescription,text:"Failed to Add Member"})}catch{alert("An error occurred.")}};return console.log(f),e.jsxs(T,{children:[e.jsx(H,{children:e.jsx(W,{color:"primary",variant:"solid",style:{marginTop:"10px",display:"flex"},children:e.jsx("h3",{children:"Shepherding"})})}),e.jsx(G,{children:e.jsxs(w,{onSubmit:d,children:[e.jsxs(c,{children:[e.jsxs(r,{md:6,children:[e.jsx(s,{style:{fontWeight:"bold",color:"blue"},children:"*Full Name"}),e.jsx(o,{placeholder:"Enter Full Name",type:"text",name:"FullName",value:m.FullName,onChange:u,className:"mb-3",required:!0}),e.jsx(s,{style:{fontWeight:"bold",color:"blue"},children:"*Date of Birth"}),e.jsx(o,{type:"date",name:"DOB",value:m.DOB,onChange:u,className:"mb-3",required:!0})]}),e.jsxs(r,{md:6,children:[e.jsx(s,{style:{fontWeight:"bold",color:"blue"},children:"*Gender"}),e.jsxs(b,{name:"Gender",value:m.Gender,onChange:u,className:"mb-3",required:!0,children:[e.jsx("option",{children:"Select Gender"}),e.jsx("option",{value:"Male",children:"Male"}),e.jsx("option",{value:"Female",children:"Female"}),e.jsx("option",{value:"Other",children:"Other"})]}),e.jsx(s,{style:{fontWeight:"bold",color:"blue"},children:"*Holy Communion Status"}),e.jsxs(b,{name:"HolyCommunionStatus",value:m.HolyCommunionStatus,onChange:u,className:"mb-3",required:!0,children:[e.jsx("option",{children:"Select Holy Communion Status"}),e.jsx("option",{value:"Yes",children:"Yes"}),e.jsx("option",{value:"No",children:"No"})]})]})]}),e.jsxs(c,{children:[e.jsxs(r,{md:6,children:[e.jsx(s,{style:{fontWeight:"bold",color:"blue"},children:"*Marital Status"}),e.jsxs(b,{name:"MaritalStatus",value:m.MaritalStatus,onChange:u,className:"mb-3",required:!0,children:[e.jsx("option",{children:"Select Marital Status"}),e.jsx("option",{value:"Single",children:"Single"}),e.jsx("option",{value:"Married",children:"Married"}),e.jsx("option",{value:"Divorced",children:"Divorced"}),e.jsx("option",{value:"Widowed",children:"Widowed"})]})]}),e.jsxs(r,{md:6,children:[e.jsx(s,{style:{fontWeight:"bold",color:"blue"},children:"*Mobile Number"}),e.jsx(o,{placeholder:"Enter Mobile Number",type:"number",name:"MobileNumber",value:m.MobileNumber,className:"mb-3",onChange:u,required:!0})]})]}),e.jsx(c,{children:e.jsxs(r,{md:6,children:[e.jsx(s,{style:{fontWeight:"bold",color:"blue"},children:"*District"}),e.jsxs(b,{name:"District",placeholder:"Enter District",value:m.District,onChange:u,className:"mb-3",required:!0,children:[e.jsx("option",{children:"Select District"}),q.map(n=>e.jsx("option",{value:n.district,children:n.district},n.id))]})]})}),e.jsx(c,{}),e.jsx(c,{children:e.jsxs(r,{md:6,style:{margin:"10px"},children:[e.jsx(g,{label:"Disabled",name:"Disabled",checked:m.Disabled,onChange:u,className:"mb-3"}),m.Disabled&&e.jsx(o,{label:"Disability Type",type:"text",name:"DisabilityType",value:m.DisabilityType,className:"mb-3",onChange:u})]})}),e.jsx(N,{type:"submit",color:"primary",children:"Submit"})]})})]})};function je(){return e.jsx(e.Fragment,{children:e.jsxs(T,{style:{boxShadow:"0px -2px 19px 1px rgba(0,0,0,0.39)",padding:"15px"},children:[e.jsx(W,{style:{backgroundColor:"rgba(22, 89, 177, 0.925)"},children:e.jsx("h3",{style:{color:"#fff"},children:"Add Member"})}),e.jsxs(U,{activeItemKey:"ExistMember",children:[e.jsxs($,{variant:"tabs",children:[e.jsx(A,{itemKey:"ExistMember",children:"Existing Member"}),e.jsx(A,{itemKey:"Shepherd",children:"Shepherding"})]}),e.jsxs(_,{children:[e.jsx(Z,{className:"p-3",itemKey:"ExistMember",style:{backgroundColor:"#fff"},children:e.jsx(Q,{})}),e.jsx(Z,{className:"p-3",itemKey:"Shepherd",style:{backgroundColor:"#fff"},children:e.jsx(V,{})})]})]})]})})}export{je as default};
