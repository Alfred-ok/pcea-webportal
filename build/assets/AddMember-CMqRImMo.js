import{r as N,o as A,j as e}from"./index--2Vg46XJ.js";import{S}from"./sweetalert2.all-BHDornT5.js";import{D as k}from"./Districtdata-DjCRdM62.js";import{C as T,a as q,b as O}from"./CForm-uSoNT2u_.js";import{C as G,a as h}from"./index-Bp6JkL8A.js";import{C as I}from"./CAlert-CwhgRHPq.js";import{C as m,a as t}from"./CRow-BUZD3U73.js";import{b as n,c as b,a as y}from"./CFormInput-DcpM5UbD.js";import{C as c}from"./CFormCheck-DFANe7fa.js";import{C as w,a as H,b as z,c as R}from"./CAccordionHeader-CFh3TWUe.js";import"./CCloseButton-CvX7nGj0.js";import"./CCollapse-7Lo-tFWz.js";const ae=()=>{const[s,f]=N.useState({DOB:"",CardSerialNumber:"",CreatedBy:"Admin",District:"",FullName:"",Gender:"",HolyCommunionStatus:"",MaritalStatus:"",MobileNumber:"",NationalID:"",SpouseName:"",SpouseZPNumber:null,Disabled:!1,DisabilityType:"",UpdatedBy:"Admin",ZPNumber:null,EPCNumber:"",Status:1,Children:[{FullName:"",Baptized:!1,Communicant:!1,yearOfBirth:null,Disabled:!1,DisabilityType:"",GuardianZpNumber:"",Status:1}]}),[d,v]=N.useState(!1),[u,p]=N.useState([{FullName:"",Communicant:!1,yearOfBirth:null,Disabled:!1,DisabilityType:"",GuardianZpNumber:"",Baptized:!1}]),B=A(),i=l=>{const{name:r,value:a,type:x,checked:C}=l.target;f(j=>({...j,[r]:x==="checkbox"?C:a}))},o=(l,r)=>{const{name:a,value:x,type:C,checked:j}=r.target;p(E=>E.map((D,Z)=>Z===l?{...D,[a]:C==="checkbox"?j:x}:D))},F=()=>p([...u,{name:"",age:"",baptized:"No",confirmed:"No",disabled:"",disabilityType:""}]),P=l=>p(u.filter((r,a)=>a!==l)),g={...s,children:d?u:[]},M=async l=>{l.preventDefault();try{const r=await fetch("http://192.168.13.244:8594/api/registrations/insertMemberAndChild",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(g)});let a=await r.json();console.log(a),r.ok?a.status=="00"&&S.fire({icon:"success",title:a.statusDescription,text:"Member Added successfully"}).finally(()=>{B("/MemberInformation")}):S.fire({icon:"error",title:a.statusDescription,text:"Failed to Add Member"})}catch{alert("An error occurred.")}};return console.log(g),e.jsxs(T,{children:[e.jsx(G,{children:e.jsx(I,{color:"primary",variant:"solid",style:{marginTop:"10px",display:"flex"},children:e.jsx("h3",{children:"Add Member"})})}),e.jsx(q,{children:e.jsxs(O,{onSubmit:M,children:[e.jsxs(m,{children:[e.jsxs(t,{md:6,children:[e.jsx(n,{label:"*Full Name",placeholder:"Enter Full Name",type:"text",name:"FullName",value:s.FullName,onChange:i,className:"mb-3",required:!0}),e.jsx(n,{label:"*Date of Birth",type:"date",name:"DOB",value:s.DOB,onChange:i,className:"mb-3",required:!0})]}),e.jsxs(t,{md:6,children:[e.jsxs(h,{label:"*Gender",name:"Gender",value:s.Gender,onChange:i,className:"mb-3",required:!0,children:[e.jsx("option",{children:"Select Gender"}),e.jsx("option",{value:"Male",children:"Male"}),e.jsx("option",{value:"Female",children:"Female"}),e.jsx("option",{value:"Other",children:"Other"})]}),e.jsxs(h,{label:"*Holy Communion Status",name:"HolyCommunionStatus",value:s.HolyCommunionStatus,onChange:i,className:"mb-3",required:!0,children:[e.jsx("option",{children:"Select Holy Communion Status"}),e.jsx("option",{value:"Yes",children:"Yes"}),e.jsx("option",{value:"No",children:"No"})]})]})]}),e.jsxs(m,{children:[e.jsxs(t,{md:6,children:[e.jsxs(h,{label:"*Marital Status",name:"MaritalStatus",value:s.MaritalStatus,onChange:i,className:"mb-3",required:!0,children:[e.jsx("option",{children:"Select Marital Status"}),e.jsx("option",{value:"Single",children:"Single"}),e.jsx("option",{value:"Married",children:"Married"}),e.jsx("option",{value:"Divorced",children:"Divorced"}),e.jsx("option",{value:"Widowed",children:"Widowed"})]}),e.jsx(n,{label:"*Mobile Number",placeholder:"Enter Mobile Number",type:"number",name:"MobileNumber",value:s.MobileNumber,className:"mb-3",onChange:i,required:!0})]}),e.jsxs(t,{md:6,children:[e.jsx(n,{label:"*National ID",placeholder:"Enter National ID",type:"number",name:"NationalID",value:s.NationalID,className:"mb-3",onChange:i,required:!0}),e.jsx(n,{label:"*Card Serial Number",type:"number",placeholder:"Enter Card Serial Number",name:"CardSerialNumber",value:s.CardSerialNumber,className:"mb-3",onChange:i,required:!0})]})]}),e.jsxs(m,{children:[e.jsx(t,{md:6,children:e.jsx(n,{label:"EPC Number",placeholder:"Enter ZPNumber e.g EP123",type:"text",name:"EPCNumber",value:s.EPCNumber,className:"mb-3",onChange:i})}),e.jsx(t,{md:6,children:e.jsx(n,{label:"*ZP Number",type:"number",placeholder:"Enter ZPNumber e.g 0123",name:"ZPNumber",value:s.ZPNumber,className:"mb-3",onChange:i,required:!0})}),e.jsx(t,{md:6,children:e.jsxs(h,{label:"*District",name:"District",placeholder:"Enter District",value:s.District,onChange:i,className:"mb-3",required:!0,children:[e.jsx("option",{children:"Select District"}),k.map(l=>e.jsx("option",{value:l.district,children:l.district},l.id))]})}),e.jsx(t,{md:6,children:e.jsx(n,{label:"Spouse Name",type:"text",name:"SpouseName",placeholder:"Enter Spouse Name",value:s.SpouseName,className:"mb-3",onChange:i})})]}),e.jsxs(m,{children:[e.jsx(t,{md:6,children:e.jsx(n,{label:"Spouse ZP Number",type:"number",placeholder:"Enter ZPNumber e.g 0123",name:"SpouseZPNumber",value:s.SpouseZPNumber,className:"mb-3",onChange:i})}),e.jsxs(t,{md:6,style:{margin:"10px"},children:[e.jsx(c,{label:"Disabled",name:"Disabled",checked:s.Disabled,onChange:i,className:"mb-3"}),s.Disabled&&e.jsx(n,{label:"Disability Type",type:"text",name:"DisabilityType",value:s.DisabilityType,className:"mb-3",onChange:i})]})]}),e.jsx(m,{children:e.jsx(t,{md:"6",children:e.jsx(c,{label:e.jsx("span",{style:{fontWeight:"bold",color:"green"},children:"Have a child?"}),checked:d,onChange:()=>v(!d),className:"mb-3"})})}),d&&u.map((l,r)=>e.jsx(w,{activeItemKey:r,style:{border:"1px solid #6082B6",backgroundColor:"blue",margin:"10px"},children:e.jsxs(H,{itemKey:0,children:[e.jsx(z,{children:"Add Children"}),e.jsx(R,{children:e.jsxs(e.Fragment,{children:[e.jsx(b,{children:"Children"}),e.jsxs(m,{children:[e.jsxs(t,{md:4,children:[e.jsx(b,{children:"*Full Name"}),e.jsx(n,{name:"FullName",placeholder:"Enter Full Name",value:l.FullName,className:"mb-3",onChange:a=>o(r,a),required:!0})]}),e.jsxs(t,{md:4,children:[e.jsx(b,{children:"*Year of Birth"}),e.jsx(n,{name:"yearOfBirth",type:"number",placeholder:"Enter Year of Birth",className:"mb-3",value:l.yearOfBirth,onChange:a=>o(r,a),required:!0})]}),e.jsxs(t,{md:4,children:[e.jsx(b,{children:"*Guardian ZP Number"}),e.jsx(n,{name:"GuardianZpNumber",placeholder:"Enter ZPNumber e.g ZP123",className:"mb-3",value:l.GuardianZpNumber,onChange:a=>o(r,a),required:!0})]}),e.jsxs(t,{md:4,children:[e.jsx(c,{label:"Baptized",name:"Baptized",checked:l.Baptized,onChange:a=>o(r,a),className:"mb-3"}),e.jsx(c,{label:"Communicant",name:"Communicant",checked:l.Communicant,onChange:a=>o(r,a),className:"mb-3"}),e.jsx(c,{label:"Disabled",name:"Disabled",checked:l.Disabled,onChange:a=>o(r,a),className:"mb-3"}),l.Disabled&&e.jsx(n,{label:"Disability Type",type:"text",name:"DisabilityType",value:l.DisabilityType,onChange:a=>o(r,a),className:"mb-3"})]})]},r),e.jsx(m,{children:e.jsx(t,{md:4,children:e.jsx(y,{style:{color:"white"},color:"danger",onClick:()=>P(r),children:"Remove"})})})]})})]})})),d&&e.jsx("div",{className:"mb-3 mt-3",style:{display:"flex",flexDirection:"row",alignItems:"center"},children:e.jsx(y,{color:"primary",onClick:F,style:{marginRight:"5px"},children:"Add Another Child"})}),e.jsx(y,{type:"submit",color:"primary",children:"Submit"})]})})]})};export{ae as default};
