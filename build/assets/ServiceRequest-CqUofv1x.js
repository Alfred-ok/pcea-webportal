import{r as t,y as te,o as re,j as e,C as Z}from"./index-C94lwiJv.js";import{S as y}from"./sweetalert2.all-huutmort.js";import{C as z,a as $,b as Y}from"./CForm-By0H7RBh.js";import{C as H,a as R}from"./index-CynBYxOh.js";import{C as K}from"./CAlert-h_oXZGtT.js";import{o as J,p as V,q as C,r as l,s as G,t as a,g as ae,h as le,j as ne,k as B,c as O,d as I,e as L,n as oe}from"./DefaultLayout-BFpOW43o.js";import{a as m}from"./CFormInput-ChrqK6Lh.js";import{b as Q,c as U,d as W,e as X}from"./logo1-_GWK0zuy.js";import{C as _}from"./CModalTitle-ChywXEWD.js";import{C as ee}from"./CFormTextarea-qcd-aoMf.js";import{C as ie,a as ce,b as q,c as F}from"./CTabList-Cz2zYZrj.js";import"./CCloseButton-fePu8NsK.js";import"./index.esm-DV_CLorw.js";import"./cil-user-Ddrdy7PS.js";import"./getTransitionDurationFromElement-Cpu4p4hx.js";function de({Marriagestatus:o}){const[n,u]=t.useState([]),[j,S]=t.useState(!0),[h,N]=t.useState(null),[v,i]=t.useState(!1),[x,g]=t.useState(),[b,k]=t.useState(""),[w,T]=t.useState(),[D,E]=t.useState(),[f,A]=t.useState(!0),{setSelectedAppointments:M,selectedAppointments:P}=te(),r=re();t.useEffect(()=>{(async()=>{try{const c=await fetch("http://192.168.12.245:8594/api/registrations/getservicerequestTypeandstatus?ServiceType=marriagerequest&Status=1");if(!c.ok)throw new Error("Network response was not ok");const d=await c.json();u(d)}catch(c){N(c.message)}finally{S(!1)}})()},[f]),console.log(n);const p=async s=>{s.preventDefault();const c={ID:Number(w),Status:Number(x),Comment:b,ZpNumber:D,ServiceType:"MarriageRequest"};try{const d=await fetch("http://192.168.12.245:8594/api/registrations/servicerequestupdate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)});if(!d.ok)throw new Error("Failed to update status");console.log("Response:",await d.json()),y.fire({icon:"success",title:"Success!",text:"Status updated successfully!"}),i(!1),A(!f)}catch(d){console.error("Error updating status:",d),y.fire({icon:"error",title:"Oops...",text:"Failed to update status. Please try again."})}};return console.log(n),n.filter(s=>s.status==o),console.log(P),e.jsxs("div",{children:[e.jsxs(z,{className:"mt-4",children:[e.jsx(H,{style:{backgroundColor:"rgba(22, 89, 177, 0.925)"},children:e.jsx("h4",{style:{color:"#fff"},children:"Marriage"})}),e.jsxs($,{children:[j&&e.jsx(Z,{color:"primary"}),h&&e.jsx(K,{color:"danger",children:h}),!j&&!h&&e.jsxs(J,{bordered:!0,stripedColumns:!0,hover:!0,small:!0,children:[e.jsx(V,{children:e.jsxs(C,{color:"primary",children:[e.jsx(l,{children:"ID"}),e.jsx(l,{children:"Date"}),e.jsx(l,{children:"Name"}),e.jsx(l,{children:"District"}),e.jsx(l,{children:"Marital Status"}),e.jsx(l,{children:"Mobile Number"}),e.jsx(l,{children:"Elder Name"}),e.jsx(l,{children:"ZP Number"}),e.jsx(l,{children:"Action"})]})}),e.jsx(G,{children:n.map(s=>e.jsxs(C,{children:[e.jsx(a,{children:s.id}),e.jsx(a,{children:new Date(s.datex).toLocaleString()}),e.jsx(a,{children:s.name}),e.jsx(a,{children:s.district}),e.jsx(a,{children:s.maritalStatus}),e.jsx(a,{children:s.mobileNumber}),e.jsx(a,{children:s.elderName}),e.jsx(a,{children:s.zpnumber}),e.jsx(a,{style:{display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsxs(ae,{children:[e.jsx(le,{color:"primary",children:"Action"}),e.jsxs(ne,{children:[e.jsx(B,{children:e.jsx(m,{color:"success",style:{color:"#fff",marginRight:"3px"},onClick:()=>{i(!v),T(s.id),E(s.zpnumber)},children:"Approve"})}),e.jsx(B,{children:e.jsx(m,{color:"primary",onClick:()=>{M(s),r("/ScheduleMeeting")},children:"Schedule meeting"})})]})]})})]},s.id))})]})]})]}),e.jsxs(Q,{visible:v,onClose:()=>i(!1),"aria-labelledby":"LiveDemoExampleLabel",children:[e.jsx(U,{children:e.jsx(_,{id:"LiveDemoExampleLabel",children:"Approve Request"})}),e.jsx(W,{children:e.jsxs(Y,{onSubmit:p,children:[e.jsxs(R,{id:"registrationStatus",className:"form-control mt-2 mb-2",label:"Status",value:x,onChange:s=>g(s.target.value),children:[e.jsx("option",{value:"",children:"Select"}),e.jsx("option",{value:"2",children:"Yes"})]}),e.jsx(ee,{className:"mt-2",placeholder:"Add a comment",label:"Comments",value:b,onChange:s=>k(s.target.value)}),e.jsx(m,{style:{color:"#fff"},className:"mt-4",type:"submit",color:"success",children:"Approve"})]})}),e.jsx(X,{children:e.jsx(m,{color:"secondary",onClick:()=>i(!1),children:"Close"})})]})]})}function se({ChangeStatus:o}){const[n,u]=t.useState([]),[j,S]=t.useState(!0),[h,N]=t.useState(null),[v,i]=t.useState(!1),[x,g]=t.useState(""),[b,k]=t.useState(""),[w,T]=t.useState(null),[D,E]=t.useState(""),[f,A]=t.useState(!0);t.useEffect(()=>{(async()=>{try{const p=await fetch("http://192.168.12.245:8594/api/registrations/getservicerequestType?ServiceType=BaptismRequest");if(!p.ok)throw new Error("Network response was not ok");const s=await p.json();u(s)}catch(p){N(p.message)}finally{S(!1)}})()},[f]);const M=async r=>{r.preventDefault();const p={ID:Number(w),Status:Number(x),Comment:b,ZpNumber:D,ServiceType:"BaptismRequest"};try{const s=await fetch("http://192.168.12.245:8594/api/registrations/servicerequestupdate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(p)});if(!s.ok)throw new Error("Failed to update status");console.log("Response:",await s.json()),y.fire({icon:"success",title:"Success!",text:"Status updated successfully!"}),i(!1),A(!f)}catch(s){console.error("Error updating status:",s),y.fire({icon:"error",title:"Oops...",text:"Failed to update status. Please try again."})}},P=n.filter(r=>r.status==o);return console.log(n),console.log(o),e.jsxs("div",{children:[e.jsxs(z,{className:"mt-4",children:[e.jsx(H,{style:{backgroundColor:"rgba(22, 89, 177, 0.925)"},children:e.jsx("h4",{style:{color:"#fff"},children:"Baptism Requests"})}),e.jsxs($,{children:[j&&e.jsx(Z,{color:"primary"}),h&&e.jsx(K,{color:"danger",children:h}),!j&&!h&&e.jsxs(J,{bordered:!0,stripedColumns:!0,hover:!0,responsive:!0,small:!0,children:[e.jsx(V,{children:e.jsxs(C,{color:"primary",children:[e.jsx(l,{children:"ID"}),e.jsx(l,{children:"Date"}),e.jsx(l,{children:"Name"}),e.jsx(l,{children:"District"}),e.jsx(l,{children:"Marital Status"}),e.jsx(l,{children:"Mobile Number"}),e.jsx(l,{children:"Elder Name"}),e.jsx(l,{children:"Elder Comments"}),e.jsx(l,{children:"ZP Number"}),e.jsx(l,{children:"Action"})]})}),e.jsx(G,{children:P.map(r=>e.jsxs(C,{children:[e.jsx(a,{children:r.id}),e.jsx(a,{children:new Date(r.datex).toLocaleString()}),e.jsx(a,{children:r.name}),e.jsx(a,{children:r.district}),e.jsx(a,{children:r.maritalStatus}),e.jsx(a,{children:r.mobileNumber}),e.jsx(a,{children:r.elderName}),e.jsx(a,{children:r.elderComments||"N/A"}),e.jsx(a,{children:r.zpnumber}),e.jsx(a,{children:e.jsx(m,{color:"success",style:{color:"#fff"},onClick:()=>{i(!0),T(r.id),E(r.zpnumber)},children:"Approve"})})]},r.id))})]})]})]}),e.jsxs(Q,{visible:v,onClose:()=>i(!1),"aria-labelledby":"LiveDemoExampleLabel",children:[e.jsx(U,{children:e.jsx(_,{id:"LiveDemoExampleLabel",children:"Approve Request"})}),e.jsx(W,{children:e.jsxs(Y,{onSubmit:M,children:[o==1?e.jsxs(R,{id:"registrationStatus",className:"form-control mt-2 mb-2",label:"Status",value:x,onChange:r=>g(r.target.value),children:[e.jsx("option",{value:"",children:"Select"}),e.jsx("option",{value:"2",children:"Yes"}),e.jsx("option",{value:"0",children:"No"})]}):o==2?e.jsxs(R,{id:"registrationStatus",className:"form-control mt-2 mb-2",label:"Status",value:x,onChange:r=>g(r.target.value),children:[e.jsx("option",{value:"",children:"Select"}),e.jsx("option",{value:"3",children:"Yes"}),e.jsx("option",{value:"0",children:"No"})]}):e.jsxs(R,{id:"registrationStatus",className:"form-control mt-2 mb-2",label:"Status",value:x,onChange:r=>g(r.target.value),children:[e.jsx("option",{value:"",children:"Select"}),e.jsx("option",{value:"4",children:"Yes"}),e.jsx("option",{value:"0",children:"No"})]}),e.jsx(ee,{className:"mt-2",placeholder:"Add a comment",label:"Comments",value:b,onChange:r=>k(r.target.value)}),e.jsx(m,{style:{color:"#fff"},className:"mt-4",type:"submit",color:"success",children:"Approve"})]})}),e.jsx(X,{children:e.jsx(m,{color:"secondary",onClick:()=>i(!1),children:"Close"})})]})]})}const ue=()=>{const[n,u]=t.useState("baptism");return e.jsxs("div",{children:[e.jsx(O,{variant:"underline-border",children:e.jsx(I,{children:e.jsx(L,{className:"nav-link-custom",active:n==="baptism",onClick:()=>u("baptism"),children:"Baptism"})})}),n==="baptism"&&e.jsx(se,{ChangeStatus:1})]})};function he({Marriagestatus:o}){const[n,u]=t.useState([]),[j,S]=t.useState(!0),[h,N]=t.useState(null),[v,i]=t.useState(!1),[x,g]=t.useState(),[b,k]=t.useState(""),[w,T]=t.useState(),[D,E]=t.useState(),[f,A]=t.useState(!0),{setSelectedAppointments:M,selectedAppointments:P}=te(),r=re();t.useEffect(()=>{(async()=>{try{const c=await fetch("http://192.168.12.245:8594/api/registrations/getservicerequestTypeandstatus?ServiceType=PrayerRequest&Status=0");if(!c.ok)throw new Error("Network response was not ok");const d=await c.json();u(d)}catch(c){N(c.message)}finally{S(!1)}})()},[f]);const p=async s=>{s.preventDefault();const c={ID:Number(w),Status:Number(x),Comment:b,ZpNumber:D,ServiceType:"PrayerRequest"};try{const d=await fetch("http://192.168.12.245:8594/api/registrations/servicerequestupdate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)});if(!d.ok)throw new Error("Failed to update status");console.log("Response:",await d.json()),y.fire({icon:"success",title:"Success!",text:"Status updated successfully!"}),i(!1),A(!f)}catch(d){console.error("Error updating status:",d),y.fire({icon:"error",title:"Oops...",text:"Failed to update status. Please try again."})}};return console.log(n),n.filter(s=>s.status==o),console.log(P),e.jsxs("div",{children:[e.jsxs(z,{className:"mt-4",children:[e.jsx(H,{style:{backgroundColor:"rgba(22, 89, 177, 0.925)"},children:e.jsx("h4",{style:{color:"#fff"},children:"Prayer"})}),e.jsxs($,{children:[j&&e.jsx(Z,{color:"primary"}),h&&e.jsx(K,{color:"danger",children:h}),!j&&!h&&e.jsxs(J,{bordered:!0,stripedColumns:!0,hover:!0,small:!0,children:[e.jsx(V,{children:e.jsxs(C,{color:"primary",children:[e.jsx(l,{children:"ID"}),e.jsx(l,{children:"Date"}),e.jsx(l,{children:"Name"}),e.jsx(l,{children:"District"}),e.jsx(l,{children:"Marital Status"}),e.jsx(l,{children:"Mobile Number"}),e.jsx(l,{children:"Elder Name"}),e.jsx(l,{children:"ZP Number"}),e.jsx(l,{children:"Action"})]})}),e.jsx(G,{children:n.map(s=>e.jsxs(C,{children:[e.jsx(a,{children:s.id}),e.jsx(a,{children:new Date(s.datex).toLocaleString()}),e.jsx(a,{children:s.name}),e.jsx(a,{children:s.district}),e.jsx(a,{children:s.maritalStatus}),e.jsx(a,{children:s.mobileNumber}),e.jsx(a,{children:s.elderName}),e.jsx(a,{children:s.zpnumber}),e.jsx(a,{children:e.jsx(a,{style:{display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsxs(ae,{children:[e.jsx(le,{color:"primary",children:"Action"}),e.jsxs(ne,{children:[e.jsx(B,{children:e.jsx(m,{color:"success",style:{color:"#fff"},onClick:()=>{i(!v),T(s.id),E(s.zpnumber)},children:"Approve"})}),e.jsx(B,{children:e.jsx(m,{color:"primary",onClick:()=>{M(s),r("/ScheduleMeeting")},children:"Schedule meeting"})})]})]})})})]},s.id))})]})]})]}),e.jsxs(Q,{visible:v,onClose:()=>i(!1),"aria-labelledby":"LiveDemoExampleLabel",children:[e.jsx(U,{children:e.jsx(_,{id:"LiveDemoExampleLabel",children:"Approve Request"})}),e.jsx(W,{children:e.jsxs(Y,{onSubmit:p,children:[e.jsxs(R,{id:"registrationStatus",className:"form-control mt-2 mb-2",label:"Status",value:x,onChange:s=>g(s.target.value),children:[e.jsx("option",{value:"",children:"Select"}),e.jsx("option",{value:"5",children:"Yes"})]}),e.jsx(ee,{className:"mt-2",placeholder:"Add a comment",label:"Comments",value:b,onChange:s=>k(s.target.value)}),e.jsx(m,{style:{color:"#fff"},className:"mt-4",type:"submit",color:"success",children:"Approve"})]})}),e.jsx(X,{children:e.jsx(m,{color:"secondary",onClick:()=>i(!1),children:"Close"})})]})]})}const me=()=>{const[n,u]=t.useState("baptism");return e.jsxs("div",{children:[e.jsx(O,{variant:"underline-border",children:e.jsx(I,{children:e.jsx(L,{className:"nav-link-custom",active:n==="baptism",onClick:()=>u("baptism"),children:"Baptism"})})}),n==="baptism"&&e.jsx(se,{ChangeStatus:2})]})},xe=()=>{const[n,u]=t.useState("baptism");return e.jsxs("div",{children:[e.jsx(O,{variant:"underline-border",children:e.jsx(I,{children:e.jsx(L,{className:"nav-link-custom",active:n==="baptism",onClick:()=>u("baptism"),children:"Baptism"})})}),n==="baptism"&&e.jsx(se,{ChangeStatus:3})]})},pe=()=>{const[o,n]=t.useState("marriage");return e.jsxs("div",{children:[e.jsxs(O,{variant:"underline-border",children:[e.jsx(I,{children:e.jsx(L,{className:"nav-link-custom",active:o==="marriage",onClick:()=>n("marriage"),children:"Marriage"})}),e.jsx(I,{children:e.jsx(L,{className:"nav-link-custom",active:o==="prayer",onClick:()=>n("prayer"),children:"Prayer"})})]}),o==="marriage"&&e.jsx(de,{}),o==="prayer"&&e.jsx(he,{})]})};function Me(){const o=localStorage.getItem("roleId"),n=o==="2"?"Parish Minister":o==="3"?"Evangelist":"Catechism";return e.jsx(e.Fragment,{children:e.jsxs(z,{style:{boxShadow:"0px -2px 19px 1px rgba(0,0,0,0.39)",padding:"15px"},children:[e.jsx(K,{color:"primary",variant:"solid",children:e.jsx("h3",{style:{color:"#fff"},children:"Member Service"})}),e.jsxs(ie,{activeItemKey:n,style:{backgroundColor:"green"},children:[e.jsxs(ce,{variant:"tabs",children:[o==="3"?e.jsx(q,{itemKey:"Evangelist",children:"Evangelist"}):e.jsx(e.Fragment,{}),o==="3"?e.jsx(q,{itemKey:"Pastoral",children:"Pastoral"}):e.jsx(e.Fragment,{}),o==="3"?e.jsx(q,{itemKey:"Catechism",children:"Catechism"}):e.jsx(e.Fragment,{}),o==="2"?e.jsx(q,{itemKey:"Parish Minister",children:"Parish Minister"}):e.jsx(e.Fragment,{})]}),e.jsxs(oe,{children:[e.jsx(F,{className:"p-3",itemKey:"Evangelist",style:{backgroundColor:"#fff"},children:e.jsx(ue,{})}),e.jsx(F,{className:"p-3",itemKey:"Pastoral",style:{backgroundColor:"#fff"},children:e.jsx(me,{})}),e.jsx(F,{className:"p-3",itemKey:"Catechism",style:{backgroundColor:"#fff"},children:e.jsx(xe,{})}),e.jsx(F,{className:"p-3",itemKey:"Parish Minister",style:{backgroundColor:"#fff"},children:e.jsx(pe,{})})]})]})]})})}export{Me as default};
