var Q=Object.defineProperty;var V=(s,o,n)=>o in s?Q(s,o,{enumerable:!0,configurable:!0,writable:!0,value:n}):s[o]=n;var m=(s,o,n)=>V(s,typeof o!="symbol"?o+"":o,n);import{r as a,j as e}from"./index-C94lwiJv.js";import{S}from"./sweetalert2.all-huutmort.js";import{t as X}from"./LdrsBaseElement-BpkUX6A7.js";import{i as ee}from"./zoomies-CYRJWhpg.js";import{c as te,d as T,e as $,o as se,p as re,q as I,r as g,s as ie,t as f,g as oe,h as ae,j as ne,k as A,l as le,m as N}from"./DefaultLayout-BFpOW43o.js";import{C as Z,a as B,b as ce}from"./CForm-By0H7RBh.js";import{C as L,a as de}from"./index-CynBYxOh.js";import{C as k,a as u}from"./CRow-Bgj36awN.js";import{c as p,b as x,a as he}from"./CFormInput-ChrqK6Lh.js";import"./index.esm-DV_CLorw.js";import"./CCloseButton-fePu8NsK.js";import"./cil-user-Ddrdy7PS.js";import"./logo1-_GWK0zuy.js";var R=":host{align-items:center;display:inline-flex;flex-shrink:0;height:calc(var(--uib-size)*.5);justify-content:center;width:var(--uib-size)}:host([hidden]){display:none}.container{align-items:flex-end;display:flex;height:100%;justify-content:space-between;width:100%}.dot{background-color:var(--uib-color);border-radius:50%;flex-shrink:0;height:calc(var(--uib-size)*.17);transition:background-color .3s ease;width:calc(var(--uib-size)*.17)}.dot:first-child{animation:jump var(--uib-speed) ease-in-out calc(var(--uib-speed)*-.45) infinite}.dot:nth-child(2){animation:jump var(--uib-speed) ease-in-out calc(var(--uib-speed)*-.3) infinite}.dot:nth-child(3){animation:jump var(--uib-speed) ease-in-out calc(var(--uib-speed)*-.15) infinite}.dot:nth-child(4){animation:jump var(--uib-speed) ease-in-out infinite}@keyframes jump{0%,to{transform:translateY(0)}50%{transform:translateY(-200%)}}";class q extends X{constructor(){super();m(this,"_attributes",["size","color","speed"]);m(this,"size");m(this,"color");m(this,"speed");this.storePropsToUpgrade(this._attributes),this.reflect(this._attributes)}static get observedAttributes(){return["size","color","speed"]}connectedCallback(){this.upgradeStoredProps(),this.applyDefaultProps({size:47,color:"black",speed:1}),this.template.innerHTML=`
      <div class="container">
        <div class="dot"></div>
        <div class="dot"></div>
        <div class="dot"></div>
        <div class="dot"></div>
      </div>
      <style>
        :host{
          --uib-size: ${this.size}px;
          --uib-color: ${this.color};
          --uib-speed: ${this.speed}s;
        }
        ${R}
      </style>
    `,this.shadow.replaceChildren(this.template.content.cloneNode(!0))}attributeChangedCallback(){const n=this.shadow.querySelector("style");n&&(n.innerHTML=`
      :host{
        --uib-size: ${this.size}px;
        --uib-color: ${this.color};
        --uib-speed: ${this.speed}s;
      }
      ${R}
    `)}}var me={register:(s="l-dot-wave")=>{customElements.get(s)||customElements.define(s,class extends q{})},element:q};me.register();ee.register();function Pe(){const[s,o]=a.useState({name:"",age:"",role:"",elderZP:"",createdBy:"",district:""}),[n,M]=a.useState([]),[j,C]=a.useState([]),[O,w]=a.useState(!0),[P,ue]=a.useState(""),[l,y]=a.useState("registration"),[d,H]=a.useState(null),[c,_]=a.useState(1),[D,U]=a.useState(!1),b=10,z=c*b,W=z-b,Y=j.slice(W,z);a.useEffect(()=>{(async()=>{const r=localStorage.getItem("token");try{const i=await fetch("http://localhost:8080/api/districts/all_districts",{headers:{Authorization:`Bearer ${r}`}});if(i.ok){const E=await i.json();M(E)}else console.error("Failed to fetch districts")}catch(i){console.error("Error fetching districts:",i)}})()},[]);const F=async()=>{w(!0);const t=localStorage.getItem("token");try{const i=await(await fetch("http://localhost:8080/api/elders",{headers:{Authorization:`Bearer ${t}`}})).json();Array.isArray(i)?C(i):(console.error("Unexpected data format:",i),C([])),U(!0)}catch(r){console.error("Error fetching elder data:",r),C([])}finally{w(!1)}};a.useEffect(()=>{l==="details"&&!D&&F()},[l,D]);const h=t=>{const{name:r,value:i}=t.target;o({...s,[r]:i})},G=async t=>{t.preventDefault();const r=d?`http://localhost:8080/api/elders/${d.id}`:"http://localhost:8080/api/elders",i=d?"PUT":"POST",E=localStorage.getItem("token");try{(await fetch(r,{method:i,headers:{"Content-Type":"application/json",Authorization:`Bearer ${E}`},body:JSON.stringify(s)})).ok?(F(),S.fire("Saved!","Elder information saved!","success")):S.fire("Oops...","Something went wrong!","error")}catch{S.fire("Oops...","Something went wrong!","error")}},J=t=>{H(t),o({name:t.name,age:t.age,role:t.role,elderZP:t.elderZP,createdBy:t.createdBy}),y("registration")},v=t=>_(t);return e.jsxs(e.Fragment,{children:[e.jsxs(te,{variant:"tabs",className:"my-4",children:[e.jsx(T,{children:e.jsx($,{href:"#",active:l==="registration",onClick:()=>y("registration"),style:{color:"blue",fontWeight:"bold"},children:"Elder Registration"})}),e.jsx(T,{children:e.jsx($,{href:"#",active:l==="details",onClick:()=>y("details"),style:{color:"blue",fontWeight:"bold"},children:"Registered Elders"})})]}),l==="registration"&&e.jsxs(Z,{className:"mb-4",children:[e.jsx(L,{children:e.jsx("h3",{style:{color:"blue",fontWeight:"bold"},children:d?"Edit Elder":"Add Elder"})}),e.jsx(B,{children:e.jsxs(ce,{onSubmit:G,children:[e.jsxs(k,{className:"mb-3",children:[e.jsxs(u,{md:"6",children:[e.jsx(p,{htmlFor:"name",style:{color:"blue",fontWeight:"bold"},children:"Full Name"}),e.jsx(x,{id:"name",name:"name",value:s.name,onChange:h,placeholder:"Enter name",required:!0}),P&&e.jsx("p",{style:{color:"red",fontSize:"14px"},children:P})]}),e.jsxs(u,{md:"6",children:[e.jsx(p,{htmlFor:"age",style:{color:"blue",fontWeight:"bold"},children:"Mobile"}),e.jsx(x,{type:"number",id:"phone",name:"phone",value:s.mobile,onChange:h,placeholder:"Enter Mobile",required:!0})]})]}),e.jsxs(k,{className:"mb-3",children:[e.jsxs(u,{md:"6",children:[e.jsx(p,{style:{color:"blue",fontWeight:"bold"},children:"District"}),e.jsxs(de,{name:"district",value:s.district,onChange:h,required:!s.alternative,children:[e.jsx("option",{value:"",style:{color:"blue",fontWeight:"bold"},children:"Select District"}),n.map(t=>e.jsx("option",{value:t.districtName,children:t.districtName},t.id))]})]}),e.jsxs(u,{md:"6",children:[e.jsx(p,{htmlFor:"elderZP",style:{color:"blue",fontWeight:"bold"},children:"Elder ZP"}),e.jsx(x,{id:"elderZP",name:"elderZP",value:s.elderZP,onChange:h,placeholder:"Enter Elder ZP",required:!0})]})]}),e.jsx(k,{className:"mb-3",children:e.jsxs(u,{md:"6",children:[e.jsx(p,{htmlFor:"serialNumber",style:{color:"blue",fontWeight:"bold"},children:"Serial Number"}),e.jsx(x,{id:"serialNumber",name:"serialNumber",value:s.serialNumber,onChange:h,placeholder:"Enter Serial Number",required:!0})]})}),e.jsx(he,{type:"submit",color:"primary",style:{fontWeight:"bold"},children:d?"Update":"Submit"})]})})]}),l==="details"&&e.jsxs(Z,{className:"mb-4",children:[e.jsx(L,{children:e.jsx("h3",{style:{color:"blue",fontWeight:"bold"},children:"REGISTERED ELDERS"})}),e.jsx(B,{children:O?e.jsx("div",{className:"text-center",children:e.jsx("l-zoomies",{size:"120",color:"blue"})}):e.jsxs(e.Fragment,{children:[e.jsxs(se,{striped:!0,children:[e.jsx(re,{children:e.jsxs(I,{children:[e.jsx(g,{style:{color:"blue",fontWeight:"bold"},children:"No."}),e.jsx(g,{style:{color:"blue",fontWeight:"bold"},children:"Name"}),e.jsx(g,{style:{color:"blue",fontWeight:"bold"},children:"ZP"}),e.jsx(g,{style:{color:"blue",fontWeight:"bold"},children:"Actions"})]})}),e.jsx(ie,{children:Y.map((t,r)=>e.jsxs(I,{children:[e.jsx(f,{children:W+r+1}),e.jsx(f,{children:t.name}),e.jsx(f,{children:t.elderZP}),e.jsx(f,{children:e.jsxs(oe,{children:[e.jsx(ae,{color:"success",style:{color:"white",fontWeight:"bold"},children:"Actions"}),e.jsxs(ne,{children:[e.jsx(A,{onClick:()=>J(t),style:{fontWeight:"bold",cursor:"pointer"},children:"Edit"}),e.jsx(A,{style:{fontWeight:"bold",cursor:"pointer",color:"danger"},children:"Delete"})]})]})})]},t.id))})]}),e.jsxs(le,{align:"center",children:[e.jsx(N,{disabled:c===1,onClick:()=>v(c-1),children:"Previous"}),[...Array(Math.ceil(j.length/b))].map((t,r)=>e.jsx(N,{active:c===r+1,onClick:()=>v(r+1),children:r+1},r)),e.jsx(N,{disabled:c===Math.ceil(j.length/b),onClick:()=>v(c+1),children:"Next"})]})]})})]})]})}export{Pe as default};
