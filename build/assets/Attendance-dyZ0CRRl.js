import{r,j as e,C as A}from"./index-C94lwiJv.js";import{C as N,a as w,b as F}from"./CForm-By0H7RBh.js";import{C as B,a as v}from"./index-CynBYxOh.js";import{b as u,a as H}from"./CFormInput-ChrqK6Lh.js";import{C as U}from"./CAlert-h_oXZGtT.js";import{o as M,p as $,q as g,r as a,s as J,t as s}from"./DefaultLayout-BFpOW43o.js";import"./CCloseButton-fePu8NsK.js";import"./index.esm-DV_CLorw.js";import"./cil-user-Ddrdy7PS.js";import"./logo1-_GWK0zuy.js";function X(){const[j,b]=r.useState([]),[T,x]=r.useState(!1),[m,C]=r.useState(""),[l,S]=r.useState(""),[i,I]=r.useState(""),[c,D]=r.useState(""),[d,E]=r.useState(""),[p,k]=r.useState("");r.useState(!1);const f=async()=>{x(!0),C("");try{const t=localStorage.getItem("token");if(!t)throw new Error("Authentication token not found");let o="http://192.168.12.245:9595/api/employee/attendance";const n=new URLSearchParams;l&&n.append("userId",l),i&&n.append("startDate",i),c&&n.append("endDate",c),d&&n.append("department",d),p&&n.append("jobType",p),n.toString()&&(o+=`?${n.toString()}`);const h=await fetch(o,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`}});if(!h.ok)throw new Error(`HTTP error! Status: ${h.status}`);const y=await h.json();b(Array.isArray(y)?y:[])}catch(t){console.error("Error fetching data:",t),C(t.message)}finally{x(!1)}};r.useEffect(()=>{f()},[]);const P=t=>{t.preventDefault(),f()};return e.jsxs(N,{className:"mb-4",children:[e.jsx(B,{style:{backgroundColor:"rgba(22, 89, 177, 0.925)"},children:e.jsx("h3",{style:{color:"#fff"},children:"Attendance"})}),e.jsxs(w,{children:[e.jsxs(F,{onSubmit:P,className:"mb-3 d-flex gap-2 alignItems-center",children:[e.jsx(u,{type:"number",label:"UserId",placeholder:"Enter User ID",value:l,onChange:t=>S(t.target.value)}),e.jsx(u,{type:"date",label:"From",value:i,onChange:t=>I(t.target.value)}),e.jsx(u,{type:"date",label:"To",value:c,onChange:t=>D(t.target.value)}),e.jsxs(v,{className:"me-2",value:d,onChange:t=>E(t.target.value),children:[e.jsx("option",{value:"",children:"Filter by Department"}),e.jsx("option",{value:"CBM",children:"CBM"}),e.jsx("option",{value:"Parish",children:"Parish"}),e.jsx("option",{value:"NIMPA",children:"NIMPA"})]}),e.jsxs(v,{value:p,onChange:t=>k(t.target.value),children:[e.jsx("option",{value:"",children:"Filter by Job Type"}),e.jsx("option",{value:"Permanent",children:"Permanent"}),e.jsx("option",{value:"Intern",children:"Intern"}),e.jsx("option",{value:"Part-time",children:"Part-time"}),e.jsx("option",{value:"Casuals",children:"Casuals"}),e.jsx("option",{value:"Employment Contract",children:"Employment Contract"}),e.jsx("option",{value:"Service Contract",children:"Service Contract"})]}),e.jsx(H,{type:"submit",color:"primary",children:"Filter"})]}),T?e.jsxs("div",{className:"text-center",children:[e.jsx(A,{color:"primary"}),e.jsx("p",{children:"Loading..."})]}):m?e.jsxs(U,{color:"danger",children:["Error: ",m]}):j.length===0?e.jsx("p",{children:"No records found."}):e.jsxs(M,{striped:!0,bordered:!0,hover:!0,children:[e.jsx($,{children:e.jsxs(g,{color:"primary",children:[e.jsx(a,{children:"#"}),e.jsx(a,{children:"User ID"}),e.jsx(a,{children:"Hours Worked"}),e.jsx(a,{children:"Employee Name"}),e.jsx(a,{children:"Department"}),e.jsx(a,{children:"Job Type"}),e.jsx(a,{children:"Check-In Time"}),e.jsx(a,{children:"Check-Out Time"})]})}),e.jsx(J,{children:j.map((t,o)=>e.jsxs(g,{children:[e.jsx(s,{children:o+1}),e.jsx(s,{children:t.userId}),e.jsx(s,{children:t.hoursWorked}),e.jsx(s,{children:t.employeeName}),e.jsx(s,{children:t.department}),e.jsx(s,{children:t.jobType}),e.jsx(s,{children:t.checkInTime}),e.jsx(s,{children:t.checkOutTime})]},o))})]})]})]})}export{X as default};
